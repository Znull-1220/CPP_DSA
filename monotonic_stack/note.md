# monotonic stack 单调栈
## overview
单调栈的适用情况：**通常是一维数组，要寻找任一个元素的右边或者左边第一个比自己大或者小的元素的位置**。如果for-loop
暴力求解，时间复杂度为$O(n^2)$，而用单调栈时间复杂度为$O(n)$，所以实质上是用空间换时间。

单调栈分为单调递增栈和单调递减栈。
- 单调递增栈：从**栈顶往栈底**看，是单调递增的关系（含相等）；
- 单调递减栈：从**栈顶往栈底**看，是单调递减的关系（含相等）；

严格来说，含“相等”的应该就不能说是“单调”了，但在这里的“单调”也包括“相等”;

规定方向为*栈顶到栈底*的顺序，则：
- 单调递增栈：
  - 在一个队列中针对每一个元素从它右边寻找第一个比它大的元素
  - 在一个队列中针对每一个元素从它左边寻找第一个比它大的元素（从后往前遍历）
- 单调递减栈：
  - 在一个队列中针对每一个元素从它右边寻找第一个比它小的元素
  - 在一个队列中针对每一个元素从它左边寻找第一个比它小的元素（从后往前遍历）

栈里面存的是元素的下标，而不是元素本身。
## 题目
单调栈模板题目: [洛谷 P5788 单调栈模板题](https://www.luogu.com.cn/problem/P5788)

LeetCode题目
- [LC #739.每日温度](daily_temperatures.cpp)：温度上升->维护单调递增栈
- [LC #496.下一个更大元素I](next_greater_element_i.cpp)：找到下一个更大元素->维护单调递增栈
- [LC #503.下一个更大元素II](next_greater_element_ii.cpp)：循环数组的情况，用`i % n`以及循环次数`2 * n`模拟跑两遍来处理->维护单调递增栈
- [LC #42.接雨水](trapping_rain_water.cpp)：接雨水的本质是找到左右两边的最大值，然后取两者中的较小值减去当前高度就可以得到接水水槽的高度；
然后根据左右第一个最大元素的差值(这可以由单调栈中的下标计算得到)乘以宽度就可以得到接水水槽的面积。->维护单调递增栈
- [LC #84.柱状图中最大的矩形](largest_rectangle_in_histogram.cpp)：和接雨水很像，只不过这里是求最大矩形面积需要求每个柱子两边的第一个最小值，所以
要维护单调递减栈

## 心得总结&方法论
1. 单调栈第一步要确定栈是什么顺序的，是单调递增还是单调递减，这取决于要求左边还是右边第一个比自己大或者小的元素；
2. 单调栈内的元素，**栈里面存的是元素的下标，而不是元素本身**；
3. 对于元素的比较要分三种情况： 当前元素小于栈顶元素、当前元素等于栈顶元素、当前元素大于栈顶元素；